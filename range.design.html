<html>
<head>
    <script>
        var person = "John";

    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://kit.fontawesome.com/a749e2e086.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" href="StyleSheet1.css" />
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="materials/style.css" />
</head>
<body>
    <!-- Body -->

    <div class="nh_topbar _size2">
        <div class="nh_topbar_left">
            <a href="home.design.html" class="btn-light btn _img"><i class="fas fa-chevron-left"></i> <span class="_back">Back</span></a>
        </div>
        <h5 class="_title"></h5>

        <div class="nh_topbar_right">
            <div class="dropdown" style="display:inline">
                <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span style="padding: 10px">
                        <i class="fas fa-house-user"></i> <span class="_size_hide">Hello, </span><b><span class="_name"></span></b>
                    </span>
                </button>
                <div style="padding-bottom:0" class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="_main _main1 dropdown-item" href="home.design.html">

                        <i class="fas fa-home">
                        </i> Home
                    </a>
                    <a class="_main _main1 dropdown-item" href="home.design.html"><i class="fas fa-phone-alt"></i>  Extras</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item nh_logout_btn" href="" data-toggle="modal" data-target="#exampleModal"><i class="fas fa-sign-out-alt"></i> Logout...</a>

                </div>
            </div>
        </div>

    </div>
    <div class="_content">
        <div class="nh_topbar_back"></div>
        <div class="scale_btns">
            <h5>How much fluid did you draw today?</h5>
            <p>Choose a value from the slider on the bottom or enter an exact value from the top. If you wish, tap Round to round the value to the nearest ten or Floor to round it down to its ten. Tap Submit to submit the value.</p>
            <hr />
            <div style="text-align: center  ">
                <div style="display:inline-block">
                    <div style="width: 300px" class="input-group mb-3">
                        <input id="fluidInput" min="0" type="number" class="form-control" aria-label="Fluid drawn" aria-describedby="basic-addon2">
                        <div class="input-group-append">
                            <span class="input-group-text" id="basic-addon2">mL</span>
                        </div>
                        <button onclick="roundScale()" class="btn btn-outline-dark no-shadow">
                            <i class="fas fa-compress-alt"></i> Round
                        </button>
                        <button onclick="roundScale(true)" class="btn btn-outline-dark no-shadow">
                            <i class="fas fa-compress-alt"></i> Floor
                        </button>
                    </div>

                </div>
                <input type="range" min="0" max="600" value="300" id="fluidScale" style="width:100%; margin-top: 50px;" />
                <div style="text-align:left; display:flex; justify-content: space-between; margin-bottom: 50px;">
                    <span>0mL</span>
                    <span>150</span>
                    <span>300</span>
                    <span>450</span>
                    <span>600</span>
                </div>

                <div class="invalidNumber alert alert-danger">
                    A value you entered was not a valid value and was reset. Please try again. <button class="btn btn-outline-danger no-shadow" onclick="done()">Dismiss</button>
                </div>
            </div>
        </div>
        <hr />
        <button data-toggle="modal" data-target="#scaleModal" class="scale_submit btn btn-primary " disabled><i class="fas fa-check-square"></i> Submit!</button>
        <button class="scale_back btn btn-danger " onclick="window.location='home.design.html'"><i class="fas fa-times"></i> Cancel</button>
    </div>
    <div class="modal fade" id="scaleModal" tabindex="-1" aria-labelledby="submitScaleMsg" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="scaleModalLabel">Submit</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" id="scaleModal-body">
                    <p>Is this correct? Submit this value now?</p>
                    <b><p class="scale_showSelected"></p></b>
                    <div class="invalidNumber alert alert-danger">
                        A value you entered was rejected and reset. Make sure the current one is correct.
                    </div>
                </div>
                <div class="modal-footer">
                    <button onclick="
    window.onbeforeunload = null; //IMPORTANT
    document.location = 'home.design.html'
    " type="button" class="modal_done btn btn-success">
                        <i class="fas fa-chevron-right"></i> Confirm!
                    </button>
                    <button type="button" class="btn btn-light" data-dismiss="modal"><i class="fas fa-times"></i> Go Back</button>
                </div>
            </div>
        </div>
    </div>





    <!-- Modals and things -->

    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Logout</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Are you sure you want to log out of the app?
                </div>
                <div class="modal-footer">
                    <button onclick="window.location = 'login.design.html'" type="button" class="btn btn-danger"><i class="fas fa-key"></i> Log out!</button>
                    <button type="button" class="btn btn-light" data-dismiss="modal"><i class="fas fa-times"></i> Cancel</button>
                </div>
            </div>
        </div>
    </div>


    <!--JQuery and debug script-->

    <script src="debug.js">
    </script>
    <script>
        var chosen = false;
        //
        ___changeHeader(true, "Home", "Record Fluid Drain", "John", "._main2")

        function done() {
            $(".scale_selected").html($("#fluidInput").val());
            $(".invalidNumber").css("display", "none");
}

        if (!chosen) {
            window.onbeforeunload = function () {
                return true;
            };
            $(".scale_showSelected.alert").removeClass("alert-danger");
            $(".scale_showSelected.alert").addClass("alert-primary");
            $(".scale_back").html($(".scale_back").html() + "*");
            ___back("Home*");
        }
        $(".scale_btns .btn").removeClass("scale_this");
        $(this).addClass("scale_this");
        chosen = true;
        $(".scale_showSelected").html('You have picked <span class="scale_selected"></span>mL.');



        $(".scale_submit").prop('disabled', false);
        $("#invalidNumber").css("display", "none");


        $("#fluidScale").change(function () {

            if ($("#fluidInput").val() != $("#fluidScale").val())
                $("#fluidInput").val($("#fluidScale").val());
            done();
        });
        $("#fluidInput").change(function () {
            if (isNaN(parseFloat($("#fluidInput").val())) || parseFloat($("#fluidInput").prop("min")) > parseFloat($("#fluidInput").val())) {
                $("#fluidInput").val($("#fluidScale").val());
                done();
                $(".invalidNumber").css("display", "");
                $("#scaleModal").modal("hide");
                return;
            }

            if ($("#fluidInput").val() != $("#fluidScale").val())
                $("#fluidScale").val($("#fluidInput").val());
            done();
        });
        function roundScale(floor = false) {
            if (floor)
                $("#fluidInput").val(Math.floor(parseInt($("#fluidInput").val()) / 10) * 10);

            else
                $("#fluidInput").val(Math.round(parseInt($("#fluidInput").val()) / 10) * 10);
            $("#fluidScale").val($("#fluidInput").val());
            done();

        }

        $("#fluidInput").val($("#fluidScale").val());
        done();
    </script>
</body>
</html>